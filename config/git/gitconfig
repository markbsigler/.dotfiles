# Git Configuration - Cross-Platform (macOS & Linux)
# See: https://git-scm.com/docs/git-config

[user]
	email = markbsigler@gmail.com
	name = Mark B. Sigler
	# Enable signing commits (configure GPG key separately)
	# signingkey = YOUR_GPG_KEY_ID

[core]
	editor = vim
	# Handle line endings cross-platform
	autocrlf = input
	# Don't convert LF to CRLF on checkout (safe for Unix/macOS/WSL)
	eol = lf
	# Treat trailing whitespace as error
	whitespace = trailing-space,space-before-tab
	# Use delta if available, fall back to less
	pager = delta --dark --side-by-side 2>/dev/null || less -R
	# XDG-compliant config location
	excludesfile = ~/.config/git/ignore

[init]
	defaultBranch = main

[pull]
	rebase = false

[push]
	# Push current branch to upstream
	default = simple
	# Push tags along with commits
	followTags = true
	# Refuse to push if upstream branch name differs
	autoSetupRemote = true

[fetch]
	# Remove deleted remote branches
	prune = true
	# Prune tags that no longer exist on remote
	pruneTags = true

[diff]
	tool = vimdiff
	# Detect renames and copies
	renames = copies
	# Use better diff algorithm
	algorithm = histogram
	# Color moved lines differently
	colorMoved = default

[merge]
	tool = vimdiff
	# Show common ancestor in merge conflicts
	conflictStyle = diff3
	# Disable fast-forward for merge commits
	ff = false

[rebase]
	# Automatically stash before rebase
	autoStash = true
	# Squash fixup commits automatically
	autoSquash = true

[status]
	# Show submodule summary
	submoduleSummary = true
	# Show branch and tracking info
	branch = true

[color]
	ui = auto
	branch = auto
	diff = auto
	status = auto

[color "diff"]
	meta = yellow bold
	frag = magenta bold
	old = red bold
	new = green bold

[alias]
	# Quick shortcuts
	st = status -sb
	co = checkout
	br = branch
	ci = commit
	
	# Better log visualization
	lg = log --color --graph --pretty=format:'%Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%cr) %C(bold blue)<%an>%Creset' --abbrev-commit
	ll = log --pretty=format:'%C(yellow)%h%Cred%d %Creset%s%Cblue [%cn]' --decorate --numstat
	
	# Show what I've done today
	today = log --since=midnight --author='Mark B. Sigler' --oneline
	yesterday = log --since=yesterday.midnight --until=midnight --author='Mark B. Sigler' --oneline
	
	# Undo last commit (keep changes)
	undo = reset HEAD~1 --mixed
	
	# Amend last commit without editing message
	amend = commit --amend --no-edit
	
	# Show branches sorted by last modified
	branches = branch -v --sort=-committerdate
	
	# Show contributors
	contributors = shortlog --summary --numbered --email
	
	# Clean up merged branches
	cleanup = "!git branch --merged | grep -v '\\*\\|main\\|master\\|develop' | xargs -n 1 git branch -d"
	
	# Show aliases
	aliases = config --get-regexp alias

[http]
	# Increase buffer for large repos
	postBuffer = 1073741824

[credential "https://dev.azure.com"]
	useHttpPath = true

# Git LFS (Large File Storage)
[filter "lfs"]
	clean = git-lfs clean -- %f
	smudge = git-lfs smudge -- %f
	process = git-lfs filter-process
	required = true

# Platform-specific includes (only loaded if paths exist)
[includeIf "gitdir:/Users/"]
	path = ~/.config/git/gitconfig-macos

[includeIf "gitdir:/home/"]
	path = ~/.config/git/gitconfig-linux

# Credential helpers are configured in platform-specific files above
